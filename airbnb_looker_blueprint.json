{
  "title": "Airbnb Bangkok – Looker Studio Blueprint",
  "version": "1.0",
  "description": "Blueprint JSON untuk membangun dashboard Looker Studio berbasis dataset Airbnb Listings Bangkok. Struktur ini mencakup field mapping, calculated fields, filter, dan komponen visual yang direkomendasikan. Gunakan sebagai referensi saat membuat report; ini bukan export resmi Looker Studio.",
  "data_sources": [
    {
      "id": "airbnb_source",
      "type": "google_sheets_or_bigquery",
      "expected_schema": {
        "dimensions": [
          "neighbourhood",
          "room_type",
          "latitude",
          "longitude"
        ],
        "metrics": [
          "price",
          "availability_365",
          "number_of_reviews",
          "reviews_per_month"
        ]
      },
      "notes": "Impor tabel hasil olahan (misal dari sim_df) ke Google Sheets / BigQuery dengan nama bidang sesuai."
    }
  ],
  "calculated_fields": [
    {
      "name": "occupancy_rate",
      "label": "Occupancy Rate",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "(365 - availability_365) / 365",
      "format": "PERCENT"
    },
    {
      "name": "revenue_baseline",
      "label": "Revenue Baseline (THB)",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "price * occupancy_rate * 365",
      "format": "CURRENCY_THB"
    },
    {
      "name": "price_new",
      "label": "Price New (THB)",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "price * 1.10",
      "format": "CURRENCY_THB"
    },
    {
      "name": "occupancy_new",
      "label": "Occupancy New",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "LEAST(occupancy_rate * 1.07, 1)",
      "format": "PERCENT"
    },
    {
      "name": "revenue_new",
      "label": "Revenue New (THB)",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "price_new * occupancy_new * 365",
      "format": "CURRENCY_THB"
    },
    {
      "name": "revenue_change_pct",
      "label": "Revenue Change (%)",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "(revenue_new - revenue_baseline) / NULLIF(revenue_baseline,0)",
      "format": "PERCENT"
    },
    {
      "name": "revenue_index",
      "label": "Revenue Index",
      "data_source": "airbnb_source",
      "type": "NUMBER",
      "formula": "price * occupancy_rate",
      "format": "NUMBER"
    }
  ],
  "filters": [
    {
      "id": "flt_neighbourhood",
      "type": "dimension_filter",
      "dimension": "neighbourhood",
      "control": "dropdown",
      "default": []
    },
    {
      "id": "flt_room_type",
      "type": "dimension_filter",
      "dimension": "room_type",
      "control": "dropdown",
      "default": []
    },
    {
      "id": "flt_price_range",
      "type": "metric_range_filter",
      "metric": "price",
      "control": "slider",
      "default_min": 0,
      "default_max": 10000
    },
    {
      "id": "flt_occupancy_range",
      "type": "metric_range_filter",
      "metric": "occupancy_rate",
      "control": "slider",
      "default_min": 0.0,
      "default_max": 1.0
    }
  ],
  "pages": [
    {
      "id": "pg_overview",
      "title": "Overview",
      "components": [
        {
          "type": "scorecard",
          "title": "Total Listings",
          "data_source": "airbnb_source",
          "metric": "COUNT_DISTINCT(id)",
          "notes": "Jika id dihapus, gunakan COUNT_ROWS()."
        },
        {
          "type": "scorecard",
          "title": "Average Price (THB)",
          "data_source": "airbnb_source",
          "metric": "AVG(price)"
        },
        {
          "type": "scorecard",
          "title": "Average Occupancy Rate",
          "data_source": "airbnb_source",
          "metric": "AVG(occupancy_rate)"
        },
        {
          "type": "scorecard",
          "title": "Average Annual Revenue (THB)",
          "data_source": "airbnb_source",
          "metric": "AVG(revenue_baseline)"
        },
        {
          "type": "scorecard",
          "title": "Simulated Revenue Growth (%)",
          "data_source": "airbnb_source",
          "metric": "AVG(revenue_change_pct)"
        },
        {
          "type": "bar_chart",
          "title": "Listings by Room Type",
          "data_source": "airbnb_source",
          "dimension": "room_type",
          "metric": "COUNT_ROWS()",
          "sort": {
            "by": "COUNT_ROWS()",
            "order": "DESC"
          },
          "filters": [
            "flt_neighbourhood"
          ]
        }
      ]
    },
    {
      "id": "pg_map",
      "title": "Spatial Distribution",
      "components": [
        {
          "type": "geo_map",
          "title": "Listing Distribution & Performance",
          "data_source": "airbnb_source",
          "lat": "latitude",
          "lng": "longitude",
          "color_metric": "price",
          "size_metric": "occupancy_rate",
          "tooltip": [
            "neighbourhood",
            "room_type",
            "price",
            "occupancy_rate",
            "revenue_index"
          ],
          "filters": [
            "flt_room_type",
            "flt_price_range",
            "flt_occupancy_range"
          ]
        }
      ]
    },
    {
      "id": "pg_neighbourhood",
      "title": "Neighbourhood Insights",
      "components": [
        {
          "type": "bar_chart_horizontal",
          "title": "Top 10 Neighbourhood by Revenue Index",
          "data_source": "airbnb_source",
          "dimension": "neighbourhood",
          "metric": "AVG(revenue_index)",
          "limit": 10,
          "sort": {
            "by": "AVG(revenue_index)",
            "order": "DESC"
          }
        },
        {
          "type": "scatter",
          "title": "Price vs Occupancy by Neighbourhood",
          "data_source": "airbnb_source",
          "x_metric": "AVG(price)",
          "y_metric": "AVG(occupancy_rate)",
          "breakdown_dimension": "neighbourhood",
          "filters": [
            "flt_room_type"
          ]
        },
        {
          "type": "table",
          "title": "Neighbourhood Summary",
          "data_source": "airbnb_source",
          "columns": [
            {
              "name": "neighbourhood",
              "type": "DIMENSION"
            },
            {
              "name": "AVG(price)",
              "label": "Avg Price (THB)"
            },
            {
              "name": "AVG(occupancy_rate)",
              "label": "Avg Occupancy"
            },
            {
              "name": "AVG(revenue_index)",
              "label": "Revenue Index"
            }
          ],
          "sort": {
            "by": "AVG(revenue_index)",
            "order": "DESC"
          }
        }
      ]
    },
    {
      "id": "pg_roomtype",
      "title": "Room Type Analysis",
      "components": [
        {
          "type": "boxplot",
          "title": "Price Distribution by Room Type",
          "data_source": "airbnb_source",
          "dimension": "room_type",
          "metric": "price"
        },
        {
          "type": "bar_chart",
          "title": "Average Revenue by Room Type",
          "data_source": "airbnb_source",
          "dimension": "room_type",
          "metric": "AVG(revenue_baseline)",
          "sort": {
            "by": "AVG(revenue_baseline)",
            "order": "DESC"
          }
        }
      ]
    },
    {
      "id": "pg_simulation",
      "title": "Revenue Simulation",
      "components": [
        {
          "type": "bar_chart",
          "title": "Average Revenue: Before vs After",
          "data_source": "airbnb_source",
          "dimension": "Scenario",
          "metric": "AVG(Revenue)",
          "notes": "Siapkan tabel ringkasan 2 baris: Scenario={Before,After}, Revenue={avg baseline, avg new}."
        },
        {
          "type": "gauge",
          "title": "Revenue Growth (%)",
          "data_source": "airbnb_source",
          "metric": "AVG(revenue_change_pct)",
          "target": 0.15
        },
        {
          "type": "table",
          "title": "Top 10 Neighbourhood – Simulated Gain",
          "data_source": "airbnb_source",
          "columns": [
            {
              "name": "neighbourhood",
              "type": "DIMENSION"
            },
            {
              "name": "AVG(revenue_baseline)",
              "label": "Avg Revenue Before"
            },
            {
              "name": "AVG(revenue_new)",
              "label": "Avg Revenue After"
            },
            {
              "name": "AVG(revenue_change_pct)",
              "label": "Δ Revenue (%)"
            }
          ],
          "limit": 10,
          "sort": {
            "by": "AVG(revenue_change_pct)",
            "order": "DESC"
          }
        }
      ]
    },
    {
      "id": "pg_host_efficiency",
      "title": "Host Efficiency (Optional)",
      "components": [
        {
          "type": "table",
          "title": "Top Hosts by Average Revenue",
          "data_source": "airbnb_source",
          "columns": [
            {
              "name": "host_id",
              "type": "DIMENSION"
            },
            {
              "name": "COUNT_ROWS()",
              "label": "# Listings"
            },
            {
              "name": "AVG(occupancy_rate)",
              "label": "Avg Occupancy"
            },
            {
              "name": "AVG(revenue_baseline)",
              "label": "Avg Revenue"
            }
          ],
          "sort": {
            "by": "AVG(revenue_baseline)",
            "order": "DESC"
          }
        }
      ]
    }
  ],
  "style_guide": {
    "theme": {
      "primary": "#FF5A5F",
      "secondary": "#00A699",
      "neutral": "#F7F7F7",
      "text": "#333333"
    },
    "recommendations": [
      "Gunakan bar chart horizontal untuk Top 10 agar label tidak terpotong.",
      "Aktifkan controls (filter) di setiap halaman: neighbourhood, room_type, price, occupancy.",
      "Sertakan catatan metodologi: occupancy_rate dihitung dari availability_365."
    ]
  }
}